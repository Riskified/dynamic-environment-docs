"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[372],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>f});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),l=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=l(e.components);return r.createElement(c.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=l(n),m=a,f=d["".concat(c,".").concat(m)]||d[m]||u[m]||i;return n?r.createElement(f,o(o({ref:t},p),{},{components:n})):r.createElement(f,o({ref:t},p))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=m;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[d]="string"==typeof e?e:a,o[1]=s;for(var l=2;l<i;l++)o[l]=n[l];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},6777:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>l});var r=n(7462),a=(n(7294),n(3905));const i={sidebar_label:"Overview",sidebar_position:1,slug:"/"},o="Overview",s={unversionedId:"overview",id:"overview",title:"Overview",description:"DynamicEnv is an innovative Kubernetes operator created to empower developers by simplifying the",source:"@site/docs/overview.md",sourceDirName:".",slug:"/",permalink:"/dynamic-environment-docs/",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/overview.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_label:"Overview",sidebar_position:1,slug:"/"},sidebar:"tutorialSidebar",next:{title:"Requirements",permalink:"/dynamic-environment-docs/getting-started/requirements"}},c={},l=[],p={toc:l},d="wrapper";function u(e){let{components:t,...i}=e;return(0,a.kt)(d,(0,r.Z)({},p,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"overview"},"Overview"),(0,a.kt)("p",null,"DynamicEnv is an innovative Kubernetes operator created to empower developers by simplifying the\nprocess of launching on-demand environments. This operator enables developers to efficiently deploy\ndifferent versions of specific services within a single Kubernetes cluster."),(0,a.kt)("p",null,"This approach offers a cost-effective and streamlined solution for testing and development, as\nopposed to the conventional method of setting up the entire architecture for each iteration."),(0,a.kt)("p",null,"DynamicEnv harnesses the capabilities of ",(0,a.kt)("a",{parentName:"p",href:"https://istio.io/"},(0,a.kt)("em",{parentName:"a"},"Istio"))," to achieve this goal."),(0,a.kt)("p",null,"Let's consider a service description:"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Sample Service Graph",src:n(700).Z,width:"1101",height:"521"})),(0,a.kt)("p",null,"This service consists of the following components:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Front-end"),(0,a.kt)("li",{parentName:"ul"},"Backend (deployment is named ",(0,a.kt)("inlineCode",{parentName:"li"},"my-namespace/backend"),")"),(0,a.kt)("li",{parentName:"ul"},"Database")),(0,a.kt)("p",null,"Typically, regular traffic flows from the front-end to the backend and then to the database."),(0,a.kt)("p",null,"When you need to test a new version of the backend, you can create a new manifest like this:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: riskified.com/v1alpha1\nkind: DynamicEnv\nmetadata:\n  name: dynamicenv-sample\nspec:\n  istioMatches:\n    - headers:\n        user:\n          exact: test-user\n  subsets:\n    - name: backend\n      namespace: my-namespace\n      containers:\n        - containerName: backend\n          image: backend-image:test-version\n")),(0,a.kt)("p",null,'DynamicEnv triggers the deployment of an additional backend (referred to as the "Tested Version" in\nthe diagram) featuring the version that requires testing. It directs all incoming traffic with a\n"user" header set to "test-user" toward this newly deployed backend.'),(0,a.kt)("p",null,"To enable testing, a test client can add a ",(0,a.kt)("inlineCode",{parentName:"p"},"user=test-user")," header. If the front-end forwards this\nheader to the backend (note that this is the application's responsibility, not the operator's), the\nrequest will be routed to the test backend ",(0,a.kt)("sup",{parentName:"p",id:"fnref-1"},(0,a.kt)("a",{parentName:"sup",href:"#fn-1",className:"footnote-ref"},"1")),". This ensures requests are directed to the\nappropriate backend while maintaining connectivity with the upstream database."),(0,a.kt)("div",{className:"footnotes"},(0,a.kt)("hr",{parentName:"div"}),(0,a.kt)("ol",{parentName:"div"},(0,a.kt)("li",{parentName:"ol",id:"fn-1"},"Alternatively, send a request directly to the backend with the header ",(0,a.kt)("inlineCode",{parentName:"li"},"user=test-user"),".",(0,a.kt)("a",{parentName:"li",href:"#fnref-1",className:"footnote-backref"},"\u21a9")))))}u.isMDXComponent=!0},700:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/overview-sample-b7b0beda83ac3abd63011816ed0f70eb.svg"}}]);